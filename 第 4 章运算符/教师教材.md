# 第4章 运算符

## 4.1 运算符概述

运算符是用于数据运算、赋值和比较的特殊符号。Java包含以下六类运算符：
1. 算术运算符
2. 赋值运算符
3. 关系运算符（比较运算符）
4. 逻辑运算符
5. 位运算符
6. 三元运算符

---

## 4.2 算术运算符
### 4.2.1 基本语法与分类
| 运算符 | 描述 | 示例       |
| ------ | ---- | ---------- |
| `+`    | 加法 | `5 + 3`→8  |
| `-`    | 减法 | `10 - 4`→6 |
| `*`    | 乘法 | `2 * 3`→6  |
| `/`    | 除法 | `10 / 3`→3 |
| `%`    | 取模 | `10 % 3`→1 |
| `++`   | 自增 | `i++`      |
| `--`   | 自减 | `j--`      |

### 4.2.2 核心知识点
#### 运算特性
1. **整数除法**：结果只保留整数部分
   ```java
   System.out.println(10 / 4);        // 输出2（非2.5）
   System.out.println(10.0 / 4);      // 输出2.5
   ```

2. **取模运算本质公式**：
   \( a \% b = a - a / b \times b \)

   **示例**：
   ```java
   System.out.println(-10 % 3);   // -1
   System.out.println(10 % -3);   // 1
   ```

#### 自增/自减陷阱
- **前++**：先自增后赋值（`++i`）
- **后++**：先赋值后自增（`i++`）

**案例演示**：
```java
int j = 8;
int k = j++;      // k=8, j=9
int m = ++j;      // m=10, j=10
```

---

## 4.3 关系运算符（比较运算符）
### 4.3.1 运算符列表
| 运算符 | 描述     | 示例     | 结果  |
| ------ | -------- | -------- | ----- |
| `>`    | 大于     | `5 > 3`  | true  |
| `<`    | 小于     | `2 < 1`  | false |
| `==`   | 等于     | `4 == 4` | true  |
| `!=`   | 不等于   | `5 != 3` | true  |
| `>=`   | 大于等于 | `7 >= 7` | true  |
| `<=`   | 小于等于 | `3 <= 2` | false |

### 4.3.2 使用场景
主要用于条件判断（如`if`语句）和循环控制（如`while`循环）。

**示例**：
```java
int a = 9, b = 8;
boolean flag = (a > b);  // flag=true
```

---

## 4.4 逻辑运算符
### 4.4.1 分类与规则
| 运算符 | 名称   | 规则                                                |
| ------ | ------ | --------------------------------------------------- |
| `&&`   | 短路与 | 两个条件均为`true`时结果为`true`                    |
| `||`   | 短路或 | 至少一个条件为`true`时结果为`true`                  |
| `!`    | 逻辑非 | 取反操作：`!true → false`                           |
| `&`    | 逻辑与 | 同`&&`，但会计算全部条件                            |
| `|`    | 逻辑或 | 同`||`，但会计算全部条件                            |
| `^`    | 异或   | 两个条件不同时结果为`true`（`true ^ false → true`） |

### 4.4.2 短路机制对比
| 运算符 | 特点                                                  |
| ------ | ----------------------------------------------------- |
| `&&`   | 若第一个条件为`false`，跳过第二个条件判断（效率更高） |
| `&`    | 无论第一个条件是否为`false`，均执行第二个条件判断     |

**示例**：
```java
if (false && ++i < 10) {}  // ++i未被执行
if (false & ++i < 10) {}   // ++i被执行
```

---

## 4.5 赋值运算符
### 4.5.1 基本与复合赋值
| 运算符 | 描述       | 等价形式    | 示例（设a=3）    |
| ------ | ---------- | ----------- | ---------------- |
| `=`    | 赋值       | `a = 5`     | `a`变为5         |
| `+=`   | 加后赋值   | `a = a + 2` | `a += 2` → `a=5` |
| `-=`   | 减后赋值   | `a = a - 1` | `a -= 1` → `a=2` |
| `*=`   | 乘后赋值   | `a = a * 3` | `a *= 3` → `a=9` |
| `/=`   | 除后赋值   | `a = a / 2` | `a /= 2` → `a=1` |
| `%=`   | 取模后赋值 | `a = a % 2` | `a %= 2` → `a=1` |

**类型转换特性**：
```java
byte b = 3;
b += 2;    // 等价于 b = (byte)(b + 2)，避免类型错误
```

---

## 4.6 三元运算符
### 4.6.1 语法与使用
**格式**：
`条件表达式 ? 表达式1 : 表达式2`

**规则**：
- 若条件为`true`，结果取表达式1的值
- 若条件为`false`，结果取表达式2的值

**示例**：
```java
int max = (a > b) ? a : b;  // 取a和b中的较大值
```

### 4.6.2 类型兼容性
要求表达式1和表达式2的类型可兼容。支持自动类型转换，例如：
```java
double d = (5 > 3) ? 3 : 3.14;  // int自动转double
```

---

## 4.7 位运算符（需二进制基础）
### 4.7.1 基本运算符
| 运算符 | 描述                  | 示例（二进制运算）             |
| ------ | --------------------- | ------------------------------ |
| `&`    | 按位与                | `0b1010 & 0b1100 → 0b1000`     |
| `|`    | 按位或                | `0b1010 | 0b1100 → 0b1110`     |
| `^`    | 按位异或              | `0b1010 ^ 0b1100 → 0b0110`     |
| `~`    | 按位取反              | `~0b1010 → 0b0101`（补码运算） |
| `<<`   | 左移（低位补0）       | `0b1010 << 2 → 0b101000`       |
| `>>`   | 右移（符号位填充）    | `0b1010 >> 2 → 0b0010`         |
| `>>>`  | 无符号右移（高位补0） | `0b1010 >>> 2 → 0b0010`        |

**案例：位移运算本质**
```java
int a = 1 >> 2;     // 1 / 4 → 0
int c = 1 << 2;     // 1 * 4 →4
System.out.println(8 << 3);  // 64
```

---

## 4.8 运算符优先级与结合性
### 4.8.1 优先级表（由高到低）
| 优先级 | 运算符                             | 结合方向 |
| ------ | ---------------------------------- | -------- |
| 1      | `()`、`[]`、`.`                    | 从左到右 |
| 2      | `!`、`~`、`++`、`--`               | 从右到左 |
| 3      | `*`、`/`、`%`                      | 从左到右 |
| 4      | `+`、`-`                           | 从左到右 |
| 5      | `<<`、`>>`、`>>>`                  | 从左到右 |
| 6      | `<`、`>`、`<=`、`>=`、`instanceof` | 从左到右 |

> **口诀**：单目 > 算术 > 位移 > 关系 > 逻辑 > 三元 > 赋值

---

## 4.9 标识符命名规范
### 4.9.1 规则（必须遵守）
1. **组成字符**：字母、数字、`_`、`$`
2. **首字符**：不能是数字
3. **避免关键字**：如`class`、`public`

### 4.9.2 规范（推荐遵守）
| 类型      | 命名规范           | 示例               |
| --------- | ------------------ | ------------------ |
| 包名      | 全小写，点分隔     | `com.project.util` |
| 类/接口   | 首字母大写的驼峰式 | `StudentManager`   |
| 变量/方法 | 首字母小写的驼峰式 | `userName`         |
| 常量      | 全大写，下划线分隔 | `MAX_SIZE`         |

---

## 4.10 进制与转换
### 4.10.1 进制表示法
- **二进制**：`0b1010`
- **八进制**：`0123`
- **十六进制**：`0x1A3F`

### 4.10.2 进制转换方法
#### 十进制 → 二进制
**步骤**：
将该数不断除以2，记录余数，倒序排列。
**示例**：
34 → `0b100010`

#### 二进制 → 八进制
**规则**：
每3位二进制转换为1位八进制。
**示例**：
`0b11010101` → `0325`

#### 十六进制 → 二进制
**规则**：
每1位十六进制转换为4位二进制。
**示例**：
`0x23B` → `0b0010 0011 1011`

---

## 4.11 键盘输入实践
### 4.11.1 使用步骤
1. **导入包**：`import java.util.Scanner;`
2. **创建对象**：`Scanner scanner = new Scanner(System.in);`
3. **读入数据**：
   ```java
   System.out.print("请输入姓名：");
   String name = scanner.next();
   System.out.print("请输入年龄：");
   int age = scanner.nextInt();
   ```

---

## 本章习题
### 一、选择题
1. `int a = (1 > 2) ? 3 : 4;`的结果是？
   A. 3
   B. 4

### 二、编程题
1. 使用三元运算符比较三个数的大小，输出最大值。
2. 将十进制237转换为二进制和十六进制。

---

## 本章小结
1. 掌握各类运算符的语法与运算规则，特别注意`++`、`--`和三元运算符的细节。
2. 理解进制转换原理，重点掌握二进制与原码、反码、补码的关系。
3. 遵循标识符命名规范，提高代码可读性。

**延伸学习**：结合位运算符实现高效的数学运算（如快速判断奇偶性）。

# 🎯 Java运算符课程设计

---

## **1. Bridge-in（导入）—— 3分钟**
**目标**：引发兴趣，建立与生活场景的连接，激活已有知识。
**活动**：

1. **情景引入**：展示“游戏分数计算”案例：  玩家A得分：`score = 100 + (kill * 5) - (death * 3)`
   - 提问：“如何用代码计算玩家最终的得分？”
   - 引发思考：`+`、`*`、`-`是什么运算符？优先级怎么处理？
2. **链接旧知**：回顾变量和数据类型（如`int score = 100;`），提问：“如何动态更新分数？”引出赋值运算符`+=`。

---

## **2. Objective（目标）—— 2分钟**
**明确学习目标**：
- 掌握算术、赋值、关系、逻辑、三元运算符的使用场景及优先级规则。
- 能编写代码解决多条件判断和计算问题（如游戏得分、年龄验证）。
- 理解不同运算符的区别（如`&&`与`&`的短路特性）。

---

## **3. Pre-assessment（前测）—— 5分钟**
**目标**：诊断学生对基础运算符的掌握程度。
**活动**：
1. **快速测验**（课堂提问）：
   - `int a = 5; a = a + 2;`能否简写？（答案：`a += 2`）
   - `System.out.println(10 % 3);`输出结果？（答案：1）
2. **错误代码纠错**：展示含优先级错误的代码（如`1 + 2 * 3 == 7`），学生指出问题。

---

## **4. Participatory Learning（参与式学习）—— 30分钟**
**知识点串联设计**：
**① 算术运算符 → 自增/自减 → 关系运算符 → 逻辑运算符 → 三元运算符（逐步递进）**

**📌 Step 1: 算术运算符（8分钟）**
- **核心讲解**：
  1. 展示算数运算符（`+、-、*、/、%`），以游戏得分计算为例。
  2. 课堂编码：计算 `score = 100 + kill*5 - death*3`，重点演示整数除法与浮点数的区别。
- **互动练习**：学生编写代码计算 `(3 + 5) * 2 / 4`，解释结果为何是4而不是4.0？

---

**📌 Step 2: 自增/自减与关系运算符（7分钟）**
- **过渡问题**：玩家得分需要实时更新（如每杀一人加5分），引入`i++`与`++i`。
- **核心讲解**：
  1. 演示陷阱案例：`int j = i++ + ++i`，解释运算顺序。
  2. **关系运算符**：比较两个玩家的得分 `if (scoreA > scoreB)`，引入`>`、`>=`等。
- **互动练习**：学生判断代码 `(10.0 == 10)` 的结果（结果：true，自动类型转换）。

---

**📌 Step 3: 逻辑运算符 → 条件验证（10分钟）**
- **过渡情景**：游客需满足年龄 ≥18 且 ≤60 才能购买门票 —— 组合条件引入逻辑运算符。
- **核心讲解**：
  1. `&&`（短路特性）与`&`的区别，用现场编码演示条件判断效率。
  2. **陷阱案例**：
     ```java
     int i = 10;
     if (i > 20 && ++i < 30) {...} // i的值不变
     ```
- **小组讨论**：如何优化代码 `if (age >= 18 || age < 0)` 的逻辑？

---

**📌 Step 4: 三元运算符 → 条件赋值（5分钟）**
- **过渡问题**：根据游戏得分显示不同评语（得分≥80为"优秀"，否则"加油"）。
- **核心讲解**：
  1. 对比 `if-else` 和三元运算符，强调简洁性：
     ```java
     String result = score >=80 ? "优秀" : "加油";
     ```
- **互动练习**：学生用三元运算符改写“判断奇偶数”的代码。

---

## **5. Post-assessment（后测）—— 7分钟**
**目标**：检测课堂目标的达成情况。
**活动**：
1. **代码实战**：
   - 题目1：计算 `(3 > 5) && (10 / 0 == 0)` 是否报错？（答案：不报错，短路特性）
   - 题目2：编写代码判断年份是否为闰年（条件：能被4整除但不能被100整除，或能被400整除）。
2. **小组互评**：交换代码，选出最优解。

---

## **6. Summary（总结）—— 3分钟**
**目标**：结构化回顾知识点，链接实际开发场景。
**活动**：

1. **知识地图**（板书）：
   ```
   算术 → 赋值 → 关系 → 逻辑 → 三元 → 优先级
   ```
   
2. **实际应用提示**：
   - 优先级口诀：单目 > 算术 > 关系 > 逻辑 > 赋值。
   - 短路逻辑 `&&` 在高并发场景的优化价值。

# 📝 **Java运算符及基础语法练习题**
**覆盖：运算符、标识符、进制转换、优先级等知识点**

---

## 一、 **选择题（每题2分，共20分）**

1. 以下哪个表达式的结果是**整数除法**？
   A) `10.0 / 4`
   B) `10 / 4`
   C) `(double)10 / 4`
   D) `10 % 4`

2. 以下代码段的输出是？
   ```java
   int i = 5;
   int j = i++ + ++i;
   System.out.println(j);
   ```
   A) 11
   B) 12
   C) 13
   D) 14

3. 以下哪个符号代表**逻辑与**且支持短路特性？
   A) `&`
   B) `|`
   C) `&&`
   D) `||`

4. 表达式 `5 > 3 && 4 < 2` 的结果是？
   A) `true`
   B) `false`

5. 以下哪项可以正确简化代码 `a = a * 2 + 3;`？
   A) `a += 3 * 2`
   B) `a = +2 * a + 3`
   C) `a = a * (2 + 3)`
   D) **没有正确选项**

6. `int a = 0b1010;` 的值是？（十进制）
   A) 8
   B) 10
   C) 12
   D) 16

7. 以下哪个标识符是合法的？
   A) `2user`
   B) `user-name`
   C) `_age`
   D) `public`

8. `int result = (10 > 5) ? 100 : 200;` 的 `result` 值是？
   A) 100
   B) 200

9. 以下代码的输出是？
   ```java
   int a = 10, b = 4;
   System.out.println(a % b + ", " + (a / (double)b));
   ```
   A) `2, 2.5`
   B) `2.5, 2`
   C) `2, 2`
   D) `2.5, 2.5`

10. 八进制数 `0123` 对应的十进制是？
    A) 83
    B) 123
    C) 19
    D) 91

---

## 二、 **填空题（每空2分，共20分）**
1. 赋值运算符 `%=` 的运算顺序是：先求余再______。
2. 逻辑异或运算符是 ______，其规则是两操作数不同时结果为 `true`。
3. 表达式 `(3 == 3) ^ (5 < 2)` 的结果是 ______。
4. Java中二进制数字字面量以 ______ 开头。
5. 标识符命名规范中，类的命名应为______风格（如 `StudentInfo`）。
6. 将十进制数 25 转换为二进制的结果是 ______。
7. Java中右移运算符 `>>` 的高位填充由______位决定。
8. 表达式 `!true || false` 的结果是 ______。
9. 运算符 `++` 若在变量前（如 `++i`）称为______增。
10. Java的单一实例输入类 `Scanner` 位于 ______ 包。

---

## 三、 **判断题（每题1分，共10分）**
1. `int a = 10++;` 是合法的语法。 （ ）
2. `0x1A3` 是合法的十六进制数。 （ ）
3. 逻辑与运算符 `&` 和短路与 `&&` 的功能完全相同。 （ ）
4. `"abc" == "abc"` 的结果是 `true`。 （ ）
5. 表达式 `10 / 0` 会抛出算术异常。 （ ）
6. `int a = 3; long b = a;` 是隐式类型转换。 （ ）
7. `~5` 的按位取反结果是 `-6`（假设使用8位二进制）。 （ ）
8. 三元运算符的条件部分必须是布尔表达式。 （ ）
9. `byte b = 256;` 能正常编译。 （ ）
10. 标识符 `goto` 是合法的变量名。 （ ）

---

## 四、 **简答题（每题5分，共20分）**
1. 简述 `i++` 和 `++i` 的区别，并举例说明。
2. 逻辑运算符 `&&` 和 `&` 的主要区别是什么？在什么场景下优先使用 `&&`？
3. 请写出十进制数 `-7` 的原码、反码、补码（假设8位二进制）。
4. 列举3种正确的变量命名方式，并说明Java标识符命名规范中的一个重要规则。

---

## 五、 **编程题（每题10分，共30分）**
1. **日期转换**：编写程序，给定总天数 `days`，输出对应的周数和剩余天数。
   - 示例输入：`17` → 输出：`2周零3天`

2. **温度转换**：编写程序，将华氏温度转换为摄氏温度。
   - 公式：`摄氏度 = 5.0/9*(华氏度-100)`
   - 示例输入：`123.45` → 输出对应摄氏度。

3. **闰年判断**：输入一个年份，判断是否为闰年。
   - 闰年条件：能被4整除但不能被100整除，或能被400整除。
   - 示例输入：`2024` → 输出：`是闰年`

---

# 🗝 **答案部分**

---

## **一、选择题答案**
1. B
2. B
3. C
4. B
5. D
6. B
7. C
8. A
9. A
10. A

---

## **二、填空题答案**
1. 赋值
2. `^`
3. `true`
4. `0b` 或 `0B`
5. 大驼峰（首字母大写）
6. `11001`
7. 符号位（符号位补全）
8. `false`
9. 前自
10. `java.util`

---

## **三、判断题答案**
1. ×
2. √
3. ×
4. √（注：字符串字面值在常量池中相同对象）
5. √
6. √
7. √（推导：原码00000101 → 反码11111010 → 补码11111011 → 十进制-6）
8. √
9. ×（`byte` 范围是 -128 ~ 127）
10. ×（`goto` 是保留字）

---

## **四、简答题答案**
1. **区别**：
   - `i++` 先返回当前值再自增，`++i` 先自增再返回新值。
   - 示例：
     ```java
     int a = 5;
     int b = a++; // b=5, a=6
     int c = ++a; // c=7, a=7
     ```

2. **逻辑运算符区别**：
   - `&&` 短路与：若第一个条件为 `false`，不评估第二个条件，效率高。
   - `&` 逻辑与：无论第一个条件如何，都会评估第二个条件。
   - 优先使用 `&&` 以优化性能（如避免空指针判断）。

3. **二进制表示**（8位）：
   - 原码：`10000111`
   - 反码：`11111000`（符号位不变，其他位取反）
   - 补码：`11111001`（反码 + 1）

4. **命名规范**：
   - 正确命名示例：`studentName`, `maxSize`, `isValid`
   - 重要规则：不能以数字开头或包含除 `_`、`$` 外的特殊符号。

---

## **五、编程题答案**
**1. 日期转换**
```java
int days = 17;
int weeks = days / 7;
int remainingDays = days % 7;
System.out.println(days + "天 = " + weeks + "周零" + remainingDays + "天");
```

**2. 温度转换**
```java
double fahrenheit = 123.45;
double celsius = 5.0 / 9 * (fahrenheit - 100);
System.out.printf("-华氏温度 %.2f → 摄氏温度 %.2f", fahrenheit, celsius);
```

**3. 闰年判断**
```java
int year = 2024;
boolean isLeap = (year % 4 == 0 && year % 100 != 0) || (year % 400 == 0);
System.out.println(year + (isLeap ? "是闰年" : "不是闰年"));
```